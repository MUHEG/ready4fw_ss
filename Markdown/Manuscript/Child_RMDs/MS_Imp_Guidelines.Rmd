---
title: "MS_Imp_Guidelines"
output: html_document
date: '2022-07-21'
---

We considered prior literature on modelling practice, our own professional experience and the needs of modelling projects we are undertaking to identify some core ethical responsibilities of CHEM developers, attributes of CHEMs that can support fulfillment of these responsibilities and criteria against which these attributes can be assessed. 

### Ethical responsibilities of CHEM developers 
Health economists have ethical responsibilities relating to the social acceptability, adequacy for purpose and beneficial impact of CHEMs.

Misalignment between the values of model developers and those of the population groups affected by decisions based on their models presents significant ethical risks [@thompson2022escape; @duckett2022journey]. The value judgments of model developers influence the assumptions, selection of model features and standards for evidence that shape the model development process [@HARVARD2020112975]. These value judgments are rarely made explicit, omissions that may lead to socially unacceptable policy recommendations [@duckett2022journey]. Key choices about the computational implementation of health economic models depend on these value judgments (see Table \@ref(tab:proscons)) and these choices in turn influence the extent to which model implementations are readily adaptable by third parties with alternative value judgments.
<!-- For example, to reduce the risk of inequitable policy implementation, it may be important for of a model to predict the benefits of harms of an intervention for different sub-populations [@10.3389/fpubh.2017.00068], but model developers may prefer to allocate a project budget to implementing other model features [@thompson2022escape]. -->

Model developers have duties both to take sufficient care that a model is adequate for the explicit purpose for which it was developed and to provide potential third party users with the means of assessing its adequacy for their proposed purposes [@Erdemir2020; @Feenstra2022; @thompson2019escape; @10.3389/fpubh.2017.00068]. It is common for health economic models to have serious methodological flaws [@carletto_zanuzzi_sammarco_russo_2020; @WONDER2015467]; insufficient validation [@Ghabri2019; @kolovos2017model; @haji2013model], poor reproducibility [@Jalali2021; @McManus2019; @Bermejo2017]; and undeclared errors [@Radeva2020]. Appropriate computational implementation choices can help address many of these shortcomings, for example by automating quality assurance checks and facilitating manual reviews by third parties.

A health economic model will have limited public benefit if it not much used, if it is mis-used or when its acceptability and adequacy rapidly decay. The scientific goals of generalisability (application without adaptation) and transferability (selective reuse and/or modification of model components) [@RN39] are advanced when models are appropriately reused in new contexts. Reuse of models as components of other models can also make model implementation more efficient [@Arnold2010; @garcia2021cost] but the reusability of models is significantly shaped by computational implementation choices such as how model code and data are authored, documented, licensed and disseminated. Currently, health economic models are rarely implemented computationally in a manner that facilitates routine updates [@Sampson2017], thus limiting the temporal window within which a CHEM can be validly applied. Without ongoing maintenance, a CHEM risks becoming less reliable with time [@garcia2021cost] and is at risk of being deployed for purposes for which it is poorly suited [@calder2018computational].
<!-- Common barriers to model re-use include commercial and legal considerations [@Feenstra2022; @Pouwels2022], as well as challenges related to model transferability across jurisdictions [@garcia2021cost]. -->

### CHEM attributes associated with ethical modelling practice
The acceptability, adequacy and public benefit responsibilities of health economic modellers are easier to state than to measure.  We have therefore focused our assessment criteria for ethical modelling practice on measurable attributes of computational model implementations. As described in Table \@ref(tab:timelygls),  we believe that implementing CHEMs that are transparent, reusable and updatable (TRU) can enable modellers to meet their ethical obligations.  We therefore selected these model attributes to use as the basis for deriving ethical assessment criteria.

```{r, child = child_docs_ls$two, echo=FALSE}
```

**Transparency** has been identified as a core feature of ethical public health modelling practice [@10.3389/fpubh.2017.00068]. Guidance on transparency in health economic modelling recommended that model code and data should be clearly documented, potentially with different versions for technical and non-technical users [@Eddy2012]. Notably, the same guidelines, published over ten years ago, did not include recommendations on sharing model code and data. However, more recent guidance recommends publicly dissemination of healthcare model artefacts using online repository services [@Erdemir2020]. Repositories such as Zenodo [@Zenodo2013] and Dataverse [@Dataverse2007] provide persistent storage solutions that generate a Digital Object Identifier (DOI) for each code and data collection. An essential component of quality assuring health economic models is verification - ensuring that calculations are correct and consistent with model specifications [@techver2019]. The extensiveness of verification checks in models implemented as software projects can be reported using the concept of code coverage [@ERICWONG2010188] - the proportion of model code that has been explicitly tested. Tests should ideally combine both unit tests (to verify that small, isolated sections of code produce the correct output when run independently) and acceptance tests (to verify that the correct output is produced when multiple code components are run together to perform tasks that meet core user-requirements [@martin2003agile]). The nature and extent of individual model authorship contributions can become unclear when models are implemented over longer time-frames with a large and changing group of collaborators [@thompson2022escape]. This issue can be addressed by use of online repository services such as GitHub [@github2007], that provide citation tools and can transparently record all individual code contributions to a modelling project over its lifecycle.

Model **reusability** is the second attribute that we identify as being core to ethical CHEM implementations. Making a CHEM’s code, data and documentation publicly available is increasingly considered good practice, yet is not sufficient to promote model re-use.  Writing model algorithms as collections of functions (short, self-contained and reusable software routines that each perform a discrete task), is good scientific computing practice [@Wilson_2017] and facilitates model reuse without adaptation (generalisability). To support reuse with adaptation (transferability), computational implementations can store model code and data in distinct files and locations (as opposed to embedding data such as parameter values into source code).  Transferability can also be advanced through the use of object-oriented programming approaches [@ready4oop2022] that take advantage of the concept of inheritance [@8717448] to allow models to be first duplicated and then selectively modified. Generalisability and transferability are further enhanced if computational implementations adopt a modular approach, in which a model is constructed from multiple independently reusable and replaceable sub-models (modules) [@pan2021modular]. To grant permissions to others to use, test and adapt models and their components, health economists can avail of two broad categories of open source licensing options. Some guidance strongly recommends the use of permissive licensing [@Wilson_2017] that provides users with great flexibility as to the purposes (including commercial) for which content can be re-used. An alternative approach is to use copyleft licenses [@copyleft2022] that can require content users to distribute any derivative works they create under similar open-source arrangements. 
<!-- Compared to using commercial modelling software, authoring CHEMs in an open-source language like R [@RCORE2022] makes it easier to -->
<!-- Using open-source development platforms and licenses can aid both generalizability and transferability. -->
<!-- The choices that CHEM developers make about model implementation and licensing will also shape who can use a model and for what purposes.  -->
<!-- are relatively easier to selectively modify. -->

Models should be **updatable** so that they remain valid for longer, evolving as new evidence emerges and the systems being modelled change [@Jenkins2021; @garcia2021cost]. Ensuring that a model is regularly reviewed to identify and implement required improvements is a recommended defense against model validity decay [@calder2018computational]. Sustainable maintenance of open source research software requires both a core development team and an active user community [@info:doi/10.2196/20028]. Online communities can be an efficient means of engaging model users in testing each version of a model, identifying issues and suggesting improvements. Services such as GitHub [@github2007] provide collaborative code development tools [@MERGEL2015464] that help elicit, integrate and reconcile contributions from multiple contributors and to ensure each update is uniquely identifiable and retrievable. It is also important that verification checks are rerun with each model update, a task that can be automated using the software development practice of Continuous Integration [@CI2017].  The risk of model revisions having unintended consequences for third party users can be mitigated through the use of deprecation conventions [@zhou2016api] that take an informative and staged approach to retiring outdated model code and data.
<!-- Currently, the core development team for a CHEM will be typically be funded to produce a project end-point deliverable whose specifications are well defined early in the project. For more complex and multi-purpose CHEMs, particularly those designed to be incorporated into decision support systems, it may be better for development teams to adopt Agile Software Development [@beck2001manifesto], an approach that has been recommended for complex public health software projects [@10.3389/fpubh.2022.899874]. An Agile model will be less clearly specified in the initial project plan, but will instead continually develop in response to the requirements and feedback of users, who are provided with an initial, simplified working version of the model at the earliest feasible opportunity. -->

###	Assessment criteria
For each model attribute, we identified only assessment criteria that can be met with existing technical solutions and which therefore have the potential to be facilitated by software frameworks.

How **transparent** a CHEM is can be assessed against the criteria:

-	**T1**: All model code, non-confidential data and testing procedures and outcomes are available in open access repositories.

-	**T2**: It is easy to see who developed and tested each part of the CHEM and to identify the modelling team’s assumptions, judgments and theories about CHEM development and use.

How **reusable** a CHEM is can be assessed against the criteria:

-	**R1**: Model code and data are implemented to facilitate both generalisability and transferability.

-	**R2**: Terms of use allow anyone to reuse model code and non-confidential data, in whole or in part, without charge, and for purposes that include the creation of derivative works.

How **updatable** a CHEM is can be assessed against the criteria:

-	**U1**: Technical infrastructure is in place to support version control and collaboration with model users in the maintenance of a model.

-	**U2**: Each new release of a model is retested, with changes implemented to minimize disruptions for existing model users.
