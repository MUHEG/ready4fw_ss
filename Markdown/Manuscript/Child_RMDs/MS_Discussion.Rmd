---
title: "MS_Discussion"
author: "Author"
date: "`r Sys.Date()`"
output: html_document
---


<!-- Ethical practice is a core expectation of health researchers and computational methods underpin most quantitative research, yet an understanding of what constitutes ethical public health modelling practice is underdeveloped [@10.3389/fpubh.2017.00068]. We have addressed this gap with our proposed responsibilities for model developers and funders, enabling CHEM attributes and CHEM implementation assessment criteria.  -->

<!-- Currently, many if not most existing CHEMs are insufficiently transparent [@Jalali2021; @McManus2019; @Bermejo2017; @Ghabri2019], not reusable [@Feenstra2022; @Emerson2019], nor updatable [@Sampson2017; @10.3389/fpubh.2022.899874]. Addressing these issues will require changes to the tools, practices and funding underpinning health economic model development. -->

We have developed a software framework and used it to author CHEM modules that largely satisfy explicit criteria for transparency, reusability and updatability. We have used toy data to demonstrate how these CHEM module libraries, originally developed for a single utility mapping study [@Hamilton2021.07.07.21260129], can be applied: (i) to datasets from new samples with different concepts and variable names; (ii) to construct models with different utility instruments, predictors and covariates; and (iii) to develop and use both cross-sectional and longitudinal mapping models. 

<!--  it should be noted that  -->Our framework and CHEM module R libraries are currently publicly available as development releases<!-- . When assessing libraries against TRU criteria, we identified the need to write  -->. We plan to undertake a number of key improvements, such as more detailed documentation, comprehensive unit testing and streamlining dependencies,<!-- as part of future quality assurance work required--> prior to submitting these libraries for quality assurance and dissemination by CRAN [@CRAN2022].

Although designed to address challenges specific to our project, ready4 can be a <!-- too fragile to be recommended as anything more than a  -->prototype for future software frameworks that meet the user requirements of other modelling teams and projects. <!-- We developed our prototype software framework primarily to address the user requirements of one group – ourselves.  -->Our prototype has a number of features that such future work can build on.<!-- that future work on CHEM software frameworks may find useful to incorporate. --> Firstly, developing a software framework to work within an existing and widely used open source programming language such as R, can keep framework scope relatively narrow. This makes it more tractable to develop, maintain and learn, and facilitates integration with other modelling tools written in that language (e.g., the dependency libraries we list in Tables \@ref(tab:cpkgs) and \@ref(tab:rfwnlibs)). Secondly, <!-- implementation that combines both object-oriented and functional programming paradigms can avail of the modular and syntactical simplicity benefits of the former, while limiting needless bundling of code artefacts. Thirdly, -->a sensible trade-off needs to be found between transparent code implementation (which requires clear and sufficiently detailed documentation) and prioritising the development of working code over writing documentation  (a foundation principle of Agile Software Development [@beck2001manifesto]). Our software framework makes this trade off by enforcing the use of consistent code style conventions and file organisation which in turn enables automated generation of simple documentation at every CHEM module update. <!-- All model data-structures and algorithms are therefore always documented (at least minimally, with machine authored content), meaning model developers have a requirement to write customised documentation less frequently. Many of the  -->

<!-- It is also important to highlight that  -->
Our framework addresses barriers to <!-- health economic model  -->transferability specific to how a model is implemented as software (ie, CHEMs). Health economists must also consider conceptual or theoretical validity<!-- issues -->. For example, the candidate models currently available in our scorz library [@hamilton_matthew_2022_6084824] were chosen because of their suitability for mapping to the utility instrument (AQoL-6D [@Richardson2012AQ]) used in the study [@Hamilton2021.07.07.21260129] for which scorz was originally developed. We have identified a need to use alternative models for mapping to utility instruments that produce less continuous total score distributions [@Hamilton2021.07.07.21260129]. Our software framework is designed to make such extensions more straightforward to implement.

Factors such as <!-- user enjoyment,  -->usability, active user-community and supporting resources influence adoption of software frameworks [@myllarniemi2018development]. To systematically address these issues for our prototype would require investments in: (i) engaging the health economic modelling community in refining framework user requirements; (ii) undertaking software re-development and testing to meet those requirements: (iii) incoporating the evolving code and documentation authoring capabilities of large language models; (iv) the development of improved and more comprehensive documentation and training resources; and (v) proactive user-community building and support. We currently lack the resources to undertake these tasks. 

Adequately planned, resourced and implemented software frameworks are potentially important enablers of improved health economic modelling practice. Reference models [@Afzali2013], methodological innovation to improve model transferability [@craig2018taking] and the development of regularly updated CHEMs that can support "living Health Technology Assessment" [@thokala2023living] would all be facilitated by a trusted software framework for implementing more transparent, reusable and updatable CHEMs. <!-- However, better tools alone are insufficient and policy and institutional changes are also required.  --><!-- Reducing waste in research is a core responsibility of research funders [@chalmers2014increase] and funding the development of CHEMs that are not adequately understood, reused or updated is wasteful. Existing incentive structures for health economists generally do not promote facilitating peers to reuse their work and funding is rarely adequate to maintain and routinely update a model. Currently, it can take “an extraordinary amount of idealism” to commit to authoring and maintaining research software [@anzt2020environment]. Previously recommended strategies for more beneficial health economic research investments include support for harmonised ethical standards for model development [@10.3389/fpubh.2017.00068], methodological innovation to improve model transferability [@craig2018taking], networks of modellers working on common health conditions [@Sampson2019], and  centralized infrastructure such as open source model repositories [@Pouwels2022] and a standard platform for model implementations [@Ghabri2019]. Development of software frameworks to support ethical CHEM implementations could enable and enhance each of these strategies. --> A future software framework for CHEMs would ideally incorporate a base set of features useful to developers of computational models across all domains of public health and health economics, with the capability for community-led extensions that are tailored to the needs of modellers focused on specific health-conditions. Such approaches will likely be important to ensure a sufficient potential user-base to make CHEM software frameworks sustainable. 














